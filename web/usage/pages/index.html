<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="AeroMesh Drones Documentation - Comprehensive guide for building, programming, and flying drones." />

		<link rel="stylesheet" href="../../styles/documentation.css" />
		<link rel="stylesheet" href="../../tools/markdown-converter/markdown-styles.css" />
		<link rel="icon" href="../../assets/img/icon.svg" type="image/svg+xml" /> <!-- Change the favicon here -->

		<!-- Apply dark mode immediately before body render -->
		<script>
			(function () {
				const savedTheme = localStorage.getItem("theme");
				// Apply dark mode class immediately to prevent flash
				if (savedTheme === "dark") {
					document.documentElement.classList.add("dark-mode");
				}
				// Update button icon/text after DOM is ready
				function updateToggleButton() {
					const toggleButton = document.getElementById("lightDarkToggle");
					if (toggleButton && savedTheme === "dark") {
						const toggleIcon = toggleButton.querySelector(".icon");
						const toggleText = toggleButton.querySelector(".icon-text");
						toggleIcon.src = "../../assets/img/light.svg";
						toggleText.textContent  = "Light Mode";
					}
				}
				if (document.readyState === "loading") {
					document.addEventListener("DOMContentLoaded", updateToggleButton);
				} else {
					updateToggleButton();
				}
			})();

			function toggleSources(id) {
				const element = document.getElementById(id);
				if (element) {
					element.classList.toggle('expanded');
				}
			}
		</script>

		<script type="module" src="../scripts/script.js"></script>
		<script type="module" src="../../tools/markdown-converter/markdown-converter.js"></script>
		<script type="module" src="../../tools/content-browser/content-browser.js"></script>
		<title>MarkDown Doc</title>  <!-- Change the title here -->
	</head>

	<body>
		<header>
			<!-- Header-->
			<div class="header-logo">
				<!-- Sidebar toggle as an icon-only control placed top-left -->
				<button id="topicToggle" class="topic-toggle" aria-label="Toggle sidebar" aria-expanded="false">
					<img class="topic-toggle-icon" src="../../assets/img/hamburger.svg" alt="menu" />
				</button>
				<!-- Add a icon in the title here `<img src="../assets/img/icon.svg" class="header-image" alt="Logo" />` -->
				<p class="header-text">MarkDown Doc</p>
				<div class="header-controls">
					<div class="header-search-bar">
						<img class="icon search-icon" src="../../assets/img/search.svg" alt="search-icon" />
						<input type="text" onfocus="searchbarFocus()" onblur="searchbarBlur()" oninput="searchbarSearch()" id="searchInput" placeholder="Search documentation..." />
						<div id="searchPopup" class="search-popup">
							<!-- Popup content goes here -->
							<ul class="search-results">
								<li class="search-no-results">Type at least 2 characters to search...</li>
							</ul>
						</div>
					</div>
					<button id="lightDarkToggle" onclick="lightDarkModeToggle()">
						<img class="icon" src="../../assets/img/dark.svg" alt="modeswitch-icon" />
						<span class="icon-text">Dark Mode</span>
					</button>
				</div>
			</div>
		</header>

		<div class="side-line"></div>

		<main>
			<div class="content-container">
				<div class="topic-selector">
					<button id="topicClose" class="topic-close" aria-label="Close sidebar">
					<img src="../../assets/img/cancel.svg" alt="close" />
					</button>
					<!-- Loading of topics will use class "topic-category" for headers of categories -->
				</div>
				<div class="display-window">
					<div id="markdown-container">
						<!-- Loading of MarkDown content will be placed here -->
					</div>
				</div>
				<div class="right-panel">
					<button class="copy-button" id="copyButton" onclick="copyButtonTrigger()">
						<img class="icon" src="../../assets/img/copy.svg" alt="copy-icon" />
						<span class="icon-text">Copy</span>
					</button>
					<div id="right-panel-header"></div>
				</div>
			</div>
		</main>
		<footer>
			<a href="credits.html">Credits</a>
			<a href="help.html">Help</a>
		</footer>

		<!-- Overlay for sliding sidebar on small screens -->
		<div id="sidebarOverlay" class="sidebar-overlay" aria-hidden="true"></div>
	</body>
</html>
